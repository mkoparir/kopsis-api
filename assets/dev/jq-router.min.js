!function(a,o){var s,e,u={route:{},params:{}},i=!0,l={Param_Replacer:"([^/]+)",Param_Matcher:/:([\w\d]+)/g};(e={routes:{}}).getCurrentParams=function(){return u.params},e.getCurrentRoute=function(){return u.route},e.getRouteName=function(e){return this.routes[e]},e.getRouteParams=function(e){for(var t={},r=e.urlExpr.exec(e.url),n=0;n<e.params.length;n++)t[e.params[n]]=r[n+1];return a.extend({},this.paramService.getParams(),t)},e.go=function(e,t){var r=this,e=r.href(e,t);return e&&(r.paramService.setParams(t),o.location.assign(e)),r},e.href=function(e,t){e=e||s;e=this.routes[e];if(e)return this.paramReplacer(e.relativeUrl,e,t)},e.isRouteParamChanged=function(e,t){var r=this;return r.href(e,t)!==r.href(e,r.getCurrentParams())},e.match=function(e){var t,r,n=this;for(r in n.routes)if(!n.routes[r].abstract&&null!==n.routes[r].urlExpr.exec(e)){t=n.routes[r];break}return t},e.onhashchange=function(e){var t,r=this,n=r.match(e);return n?(n.previousUrl=u.route.url||e,n.url=e,t=r.getRouteParams(n),a(o).trigger(r.events.routeMatched,[n,t]),r.renderEngine.processRoute(n,t).then(function(){a(o).trigger(r.events.routeChangeStart,[n,t]),r.renderEngine.render(n,t),u.route=n,u.params=t,a(o).trigger(r.events.routeChangeSuccess,[n,t])})):(a(o).trigger(r.events.routeNotMatched,[n,t]),s&&r.go(s)),r},e.paramReplacer=function(e,t,r){if(e){for(var n=0;n<t.params.length;n++)e=e.replace(":"+t.params[n],r[t.params[n]]);return e}},e.run=function(e,t,r){var n=this;if(i){if(-1===o.location.pathname.lastIndexOf(".")&&"/"!==o.location.pathname.substr(-1))return void(o.location.pathname=o.location.pathname+"/");n.renderEngine.setViewSelector(e),a(o).on("hashchange",function(){n.onhashchange(o.location.hash)}),n.match(o.location.hash)?n.onhashchange(o.location.hash):n.go(t,r),i=!1}return n},e.setData=function(e,t){var r,n=this;for(r in t=void 0===t||t,n.routes={},e){var a,o,s=r.split("."),u=[],i="",c=n.routes[r]=jQuery.extend(!0,{},e[r]);c.name=r,c.segments=[],c.params=[];for(var h=0;h<s.length;h++){u.push(s[h]);var g=u.join(".");i+=e[g].url,c.segments.push(g)}for(;null!==(o=l.Param_Matcher.exec(i));)c.params.push(o[1]);a=new RegExp("^"+i.replace(l.Param_Matcher,l.Param_Replacer)+"$"),c.relativeUrl=i,c.urlExpr=a,c.cache=c.hasOwnProperty("cache")?c.cache:t}return n},e.setDefault=function(e){return s=e,this},e=e,a.router=e}(jQuery,window),function(t,r,e){e.events=Object.freeze({renderViewSuccess:"jqRouter.renderViewSuccess",routeChangeStart:"jqRouter.routeChangeStart",routeChangeSuccess:"jqRouter.routeChangeSuccess",routeMatched:"jqRouter.routeMatched",routeNotMatched:"jqRouter.routeNotsMatched",viewDestroyed:"jqRouter.viewDestroyed"}),e.onRouteBeforeChange=function(e){return t(r).on(this.events.routeChangeStart,e),this},e.onRouteChanged=function(e){return t(r).on(this.events.routeChangeSuccess,e),this},e.onRouteMatched=function(e){return t(r).on(this.events.routeMatched,e),this},e.onRouteNotMatched=function(e){return t(r).on(this.events.routeNotMatched,e),this},e.onViewChange=function(e){return t(r).on(this.events.renderViewSuccess,e),this},e.onViewDestroyed=function(e){return t(r).on(this.events.viewDestroyed,e),this}}(jQuery,window,$.router),function(){var t,e;$.router.paramService=((e={}).setParams=function(e){t=e},e.getParams=function(){return t},e)}(jQuery),function(i,c){var u,h,g;c.renderEngine=(g={},(h={}).clean=function(e,t){for(var r=e.length-1;t<=r;r--){var n=c.getRouteName(e[r]);i(window).trigger(c.events.viewDestroyed,[n])}return this},h.getViewTemplate=function(e,t,r){return i.get({url:e,cache:r,dataType:"html"}).then(function(e){g[t]=e})},h.processRoute=function(e,t){for(var r=[],n=0;n<e.segments.length;n++){var a,o=c.getRouteName(e.segments[n]);if(Array.isArray(o.resolve))for(var s=0;s<o.resolve.length;s++){var u=o.resolve[s];"function"==typeof u&&r.push(u(e,t))}else"function"==typeof o.resolve&&r.push(o.resolve(e,t));g[o.templateUrl]&&o.cache||(a=c.paramReplacer(o.templateUrl,o,t),r.push(this.getViewTemplate(a,o.templateUrl,o.cache)))}return i.when.apply(i,r)},h.render=function(e,t){for(var r=c.getCurrentRoute(),n=i.isEmptyObject(r),a=0;a<e.segments.length;a++){var o=c.getRouteName(e.segments[a]),s=i(u+":eq("+a+")");n||(n=e.segments[a]!==r.segments[a]||a+1===e.segments.length||c.isRouteParamChanged(e.segments[a],t))&&h.clean(r.segments,a),n&&(s.html(g[o.templateUrl]),i(window).trigger(c.events.renderViewSuccess,[o,e,t]))}return this},h.setViewSelector=function(e){return u=e,this},h)}(jQuery,$.router);